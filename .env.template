# IMPULSE - Configuración de entorno
# Copia este archivo a .env y modifica los valores según tu entorno

# =================================
# INFORMACIÓN DEL PROYECTO
# =================================
PROJECT_NAME=IMPULSE
ENVIRONMENT=development
TIMEZONE=UTC

# =================================
# TOGGLES PRINCIPALES (activación/desactivación funcionalidades)
# =================================

# BILLING: Monetización y pagos (false hasta alta fiscal)
BILLING_ON=false

# COACH_MARKET: Marketplace de coaches (false hasta listo legalmente)
COACH_MARKET_ON=false

# ADS: Sistema de anuncios (false = Pro sin anuncios siempre)
ADS_ON=false

# CMP: Cookie Management Platform (false hasta que añadas GA4/Ads)
CMP_ON=false

# BETA_MODE: Modo beta 90 días gratis (true durante beta)
BETA_MODE=true

# MAINTENANCE_MODE: Modo mantenimiento
MAINTENANCE_MODE=false

# =================================
# BASE DE DATOS (MySQL 8)
# =================================
MYSQL_ROOT_PASSWORD=impulse_root_2024_change_in_production
MYSQL_DATABASE=impulse_db
MYSQL_USER=impulse_user
MYSQL_PASSWORD=impulse_pass_2024_change_in_production
MYSQL_HOST=localhost
MYSQL_PORT=3306

# =================================
# REDIS (Cache y Rate Limiting)
# =================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=impulse_redis_2024_change_in_production
REDIS_DATABASE=0

# =================================
# STORAGE (MinIO/S3)
# =================================
MINIO_ENDPOINT=localhost:9000
MINIO_ROOT_USER=impulse_minio
MINIO_ROOT_PASSWORD=impulse_minio_2024_change_in_production
MINIO_BUCKET_NAME=impulse-media
MINIO_USE_SSL=false

# Cloudflare R2 (producción)
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_ACCESS_KEY=your_r2_access_key
R2_SECRET_KEY=your_r2_secret_key
R2_BUCKET_NAME=impulse-media-prod

# =================================
# JWT SEGURIDAD
# =================================
JWT_SECRET=impulse_jwt_secret_2024_very_long_key_minimum_256_bits_change_in_production
JWT_ACCESS_TOKEN_VALIDITY=900000
JWT_REFRESH_TOKEN_VALIDITY=1209600000

# RSA Keys (generadas automáticamente si no existen)
JWT_PRIVATE_KEY_PATH=./keys/private_key.pem
JWT_PUBLIC_KEY_PATH=./keys/public_key.pem

# =================================
# EMAIL (Brevo/Sendinblue)
# =================================
MAIL_HOST=mailhog
MAIL_PORT=1025
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_FROM_ADDRESS=no-reply@impulse.app
MAIL_FROM_NAME=IMPULSE

# Brevo/Sendinblue (producción)
BREVO_API_KEY=your_brevo_api_key
BREVO_SMTP_HOST=smtp-relay.brevo.com
BREVO_SMTP_PORT=587

# =================================
# STRIPE (Pagos - solo si BILLING_ON=true)
# =================================
STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_TAX_ON=false
STRIPE_CUSTOMER_PORTAL_ON=false

# Productos Stripe
STRIPE_PRODUCT_PRO_MONTHLY=price_pro_monthly_id
STRIPE_PRODUCT_PRO_YEARLY=price_pro_yearly_id
STRIPE_PRODUCT_TEAMS=price_teams_id

# =================================
# PAYPAL (Pagos alternativos)
# =================================
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret
PAYPAL_ENVIRONMENT=sandbox

# =================================
# OBSERVABILIDAD Y MONITOREO
# =================================

# Sentry (errores)
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=development

# Plausible Analytics (UE, sin cookies)
PLAUSIBLE_DOMAIN=impulse.app
PLAUSIBLE_API_KEY=your_plausible_api_key

# Logs
LOG_LEVEL=INFO
LOG_FORMAT=JSON

# =================================
# RATE LIMITING
# =================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_GENERAL=100
RATE_LIMIT_LOGIN=10
RATE_LIMIT_UPLOAD=20
RATE_LIMIT_REPORTS=5

# =================================
# SEGURIDAD AVANZADA
# =================================

# CSP (Content Security Policy)
CSP_ENABLED=true
CSP_REPORT_ONLY=false

# CORS
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,https://impulse.app
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_MAX_AGE=3600

# =================================
# ANTIVIRUS Y SEGURIDAD MEDIA
# =================================
ANTIVIRUS_ENABLED=true
ANTIVIRUS_SERVICE_URL=http://clamav:3310
MAX_FILE_SIZE_MB=25
ALLOWED_EXTENSIONS=jpg,jpeg,png,mp4,mov

# =================================
# COMPLIANCE Y LEGAL
# =================================

# GDPR
GDPR_ENABLED=true
DATA_RETENTION_MONTHS=12
EXPORT_FORMAT=JSON
DELETE_GRACE_PERIOD_DAYS=14

# DSA (Digital Services Act)
DSA_ENABLED=true
MODERATION_SLA_HOURS=72
TRANSPARENCY_REPORTS=true

# =================================
# INFORMACIÓN LEGAL
# =================================
COMPANY_NAME=IMPULSE
COMPANY_OWNER=Diego Barreiro Liste
COMPANY_ADDRESS=Oroso (A Coruña), España, 15688
SUPPORT_EMAIL=impulse.soporte@gmail.com
LEGAL_EMAIL=impulse.legal@gmail.com
ABUSE_EMAIL=impulse.abuse@gmail.com

# =================================
# DESARROLLO LOCAL
# =================================
DEV_AUTO_LOGIN=true
DEV_SKIP_EMAIL_VERIFICATION=true
DEV_MOCK_PAYMENTS=true
DEV_SEED_DATA=true

# =================================
# FRONTEND (PWA)
# =================================
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:8080
API_BASE_URL=http://localhost:8080/api

# PWA
PWA_NAME=IMPULSE
PWA_SHORT_NAME=IMPULSE
PWA_DESCRIPTION=Invierte en ti. Haz que cada meta cuente.
PWA_THEME_COLOR=#000000
PWA_BACKGROUND_COLOR=#ffffff

# =================================
# JOBS Y TAREAS PROGRAMADAS
# =================================
JOBS_ENABLED=true
COMPUTE_SCORES_CRON=0 0 3 ? * MON
WIN_BACK_CRON=0 0 10 * * ?
BETA_REMINDER_CRON=0 0 9 * * ?
DATA_RETENTION_CRON=0 0 2 * * ?

# =================================
# ALGORITMOS Y SCORING
# =================================

# UCI (User Consistency Index)
UCI_ENABLED=true
UCI_WIN_BACK_THRESHOLD=70
UCI_DAYS_WITHOUT_ACTIVITY=5

# Fraude y antispam
FRAUD_DETECTION_ENABLED=true
MAX_REFERRALS_PER_MONTH=3
REFERRAL_COOLDOWN_DAYS=7

# =================================
# BETA Y LANZAMIENTO
# =================================
BETA_DURATION_DAYS=90
BETA_END_ALERTS_DAYS=15,7,1
FREE_PLAN_LIMITS_CHALLENGES=2
FREE_PLAN_LIMITS_VALIDATORS=3

# =================================
# NOTAS IMPORTANTES
# =================================
# 1. NUNCA subas este archivo .env al repositorio
# 2. Cambia TODAS las contraseñas en producción
# 3. Genera nuevas claves JWT para producción
# 4. Activa BILLING_ON solo después del alta fiscal
# 5. COACH_MARKET_ON requiere Stripe Connect configurado
# 6. CMP_ON solo si usas GA4 o anuncios de terceros
